*  ~zfs-snap-diff~

helps you with your zfs snapshots.

** Documentation

See the [[https://j-keck.github.io/zfs-snap-diff/][website]] for more details.

** Get it

*** Prebuild

 You can download a prebuild version from: [[https://j-keck.github.io/zfs-snap-diff/docs/install]]

*** Build from source

 The backend from ~zfs-snap-diff~ is implemented in [[https://golang.org][Go]], the frontend in [[http://purescript.org][PureScript]].

**** Build with ~go~

 I use [[https://github.com/go-bindata/go-bindata][go-bindata]] to decode the frontend code and all dependencies to a
 go source file so you need only the go compiler to compile it yourself.

 The minimum supported go version is =go1.12=.

   - clone this repo: ~git clone https://github.com/j-keck/zfs-snap-diff~
   - ~cd zfs-snap-diff~
   - build it: ~go build -ldflags="-X main.version=$(git describe)" ./cmd/zfs-snap-diff~

 The optional ~-ldflags="-X main.version=$(git describe)"~ flag updates the ~version~ string in the binary.


**** Build with ~nix~

I use [[https://nixos.org/nix/][nix]] to build my projects. The ~nix~ build also compiles the frontend
to javascript and decode it in ~pkg/webapp/bindata.go~.

   - clone this repo: ~git clone https://github.com/j-keck/zfs-snap-diff~
   - ~cd zfs-snap-diff~
   - build it: ~nix-build -A zfs-snap-diff~

The build artifacts ~zfs-snap-diff~ and ~zsd~ are in ~./result/bin/~.

 To crosscompile the binary for

   - FreeBSD: ~nix-build -A zfs-snap-diff --argstr goos freebsd~
   - MacOS: ~nix-build -A zfs-snap-diff --argstr goos darwin~
   - Solaris: ~nix-build -A zfs-snap-diff --argstr goos solaris~


** Run it

 #+BEGIN_SRC sh
 ./zfs-snap-diff [OPTIONS] <ZFS_DATASET_NAME>
 #+END_SRC

 This starts a embedded webserver and serves the included web-app at http://127.0.0.1:12345.

 [[./doc/site/static/images/browse-filesystem.png][file:./doc/site/static/images/browse-filesystem.png]]
