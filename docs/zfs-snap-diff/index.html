<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="zfs-snap-diff"><meta property="og:title" content="zfs-snap-diff"><meta property="og:description" content="zfs-snap-diff - web application to find older file versions in zfs snapshots and zfs snapshot management tool.
With zfs-snap-diff you can
  find older file versions in your zfs-snapshots for a given file
  view the file content from a given snapshot
  inspect a diff from the older version to the actual version
  revert a single change
  restore a version from a zfs snapshot"><meta property="og:type" content="article"><meta property="og:url" content="https://j-keck.github.io/zfs-snap-diff/docs/zfs-snap-diff/"><title>zfs-snap-diff | ZFS Snap Diff</title><link rel=icon href=https://j-keck.github.io/zfs-snap-diff/favicon.png type=image/x-icon><link rel=stylesheet href=https://j-keck.github.io/zfs-snap-diff/book.min.66d2f6926159dd697150bdcd901eead56a7adc9408513ccb9ab553939262dd4c.css integrity="sha256-ZtL2kmFZ3WlxUL3NkB7q1Wp63JQIUTzLmrVTk5Ji3Uw="><script defer src=https://j-keck.github.io/zfs-snap-diff/en.search.min.e2bb6ea3ce5b44ad6f3aed91ca63213316d2a4757533b76680a499742304926a.js integrity="sha256-4rtuo85bRK1vOu2RymMhMxbSpHV1M7dmgKSZdCMEkmo="></script><script defer src=https://j-keck.github.io/zfs-snap-diff/fontawesome-all.min.js></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://j-keck.github.io/zfs-snap-diff/><span>ZFS Snap Diff</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/install/>Installation</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/zfs-snap-diff/ class=active>zfs-snap-diff</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/zsd/>zsd</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/configuration/>Configuration</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/changelog/>Changelog</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://j-keck.github.io/zfs-snap-diff/svg/menu.svg class=book-icon alt=Menu></label>
<strong>zfs-snap-diff</strong>
<label for=toc-control><img src=https://j-keck.github.io/zfs-snap-diff/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#usage>Usage</a></li><li><a href=#startup>Startup</a></li><li><a href=#browse-the-actual-filesytem>Browse the actual filesytem</a></li><li><a href=#browse-snapshots>Browse snapshots</a></li><li><a href=#create-snapshots>Create snapshots</a></li><li><a href=#destroy-snapshot>Destroy snapshot</a></li><li><a href=#download-zip-archive>Download zip-archive</a></li></ul></nav></aside></header><article class=markdown><p><code>zfs-snap-diff</code> - web application to find older file versions in zfs snapshots and zfs snapshot management tool.</p><p>With <code>zfs-snap-diff</code> you can</p><ul><li><p>find older file versions in your zfs-snapshots for a given file</p></li><li><p>view the file content from a given snapshot</p></li><li><p>inspect a diff from the older version to the actual version</p></li><li><p>revert a single change</p></li><li><p>restore a version from a zfs snapshot</p></li><li><p>download a file version</p></li><li><p>browse the directory content from a snapshot</p></li><li><p>download a zip-archive from any folder in your snapshots</p></li><li><p>create and destroy snapshots in the webapp</p></li><li><p>bookmark often used folders</p></li></ul><h2 id=usage>Usage</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>main‚ü© zfs-snap-diff -h
zfs-snap-diff - web application to find older file versions in zfs snapshots and zfs snapshot management tool.

USAGE:
  ./zfs-snap-diff [OPTIONS] &lt;ZFS_DATASET_NAME&gt;

OPTIONS:
  -V	print version and exit
  -a	listen on all interfaces
  -cert string
        TLS certificate file
  -compare-method string
        used method to determine if a file was modified (&#39;auto&#39;, &#39;mtime&#39;, &#39;size+mtime&#39;, &#39;content&#39;, &#39;md5&#39;) (default &#34;auto&#34;)
  -d int
        days to scan (default 7)
  -diff-context-size int
        show N lines before and after each diff (default 2)
  -key string
        TLS private key file
  -l string
        webserver listen address (default &#34;127.0.0.1&#34;)
  -log-locations
        log messages with caller location
  -log-timestamps
        log messages with timestamps in unix format
  -mount-snapshots
        mount snapshot (only necessary if it&#39;s not mounted by zfs automatically
  -p int
        webserver port (default 12345)
  -tls
        use TLS - NOTE: -cert &lt;CERT_FILE&gt; -key &lt;KEY_FILE&gt; are mandatory
  -use-cache-dir-for-backups
        use platform depend user local cache directory for backups (default true)
  -use-sudo
        use sudo when executing &#39;zfs&#39; commands
  -v	debug output
  -vv
        trace output with caller location
  -webapp-dir string
        when given, serve the webapp from the given directory

Project home page: https://j-keck.github.io/zfs-snap-diff
</code></pre></div><h2 id=startup>Startup</h2><ul><li>startup a server instance</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>./zfs-snap-diff <span style=color:#f92672>[</span>OPTIONS<span style=color:#f92672>]</span> &lt;ZFS_DATASET_NAME&gt;
</code></pre></div><p>This starts a embedded webserver and serves the included web-app at <a href=http://127.0.0.1:12345>http://127.0.0.1:12345</a>.</p><ul><li>open your webbrowser at</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>http://127.0.0.1:12345
</code></pre></div><h2 id=browse-the-actual-filesytem>Browse the actual filesytem</h2><p>You can browse the actual filesystem and inspect a diff from the actual file version to the older
file version in the selected snapshot, revert a single change or restore a whole file.</p><figure><a href=https://j-keck.github.io/zfs-snap-diff/images/browse-filesystem.png><img src=https://j-keck.github.io/zfs-snap-diff/images/browse-filesystem.png alt="Screenshot from 'Browse filesystem'"></a></figure><h2 id=browse-snapshots>Browse snapshots</h2><p>In this view you can view all snapshots.</p><figure><a href=https://j-keck.github.io/zfs-snap-diff/images/browse-snapshots-snapshots.png><img src=https://j-keck.github.io/zfs-snap-diff/images/browse-snapshots-snapshots.png alt="Screenshot from 'Browse snapshots'"></a></figure><p>and inspect the directory content where the snapshot was created</p><figure><a href=https://j-keck.github.io/zfs-snap-diff/images/browse-snapshots-dir-browser><img src=https://j-keck.github.io/zfs-snap-diff/images/browse-snapshots-dir-browser.png alt="Browse snapshots / directory browser"></a></figure><h2 id=create-snapshots>Create snapshots</h2><p>To create a snapshot of the actual dataset use the camera symbol <i class="fas fa-camera"></i>in the dataset selector.
<img src=https://j-keck.github.io/zfs-snap-diff/images/create-snapshot-symbol.png alt></p><p>You can enter a snapshot name in <strong>&ldquo;Snapshot name template&rdquo;</strong> and <code>zfs-snap-diff</code> will
show the resulting name in <strong>&ldquo;Snapshot name&rdquo;</strong>.</p><figure><a href=https://j-keck.github.io/zfs-snap-diff/images/create-snapshot.png><img src=https://j-keck.github.io/zfs-snap-diff/images/create-snapshot.png></a></figure><p>The template supports the following format sequences:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Format sequences are alike the `date` command
  %d: day of month (e.g., 01)
  %m: month (01..12)
  %y: last two digits of year (00..99)
  %Y: year
  %F: full date; like %Y-%m-%d
  %H: hour (00..23)
  %I: hour (01..12)
  %M: minute (00..59)
  %S: second (00..60)
  %s: seconds since 1970-01-01 00:00:00 UTC
</code></pre></div><p>The default snapshot name template is per <a href=https://j-keck.github.io/zfs-snap-diff/docs/configuration/#snapshot-name-template><code>snapshot-name-template</code></a> configurable.</p><h2 id=destroy-snapshot>Destroy snapshot</h2><p>You can destroy snapshots with the <i class="fas fa-trash"></i>symbol in <strong>&ldquo;Browse snapshots&rdquo;</strong>
where you see all snapshots for the selected dataset.</p><figure><a href=https://j-keck.github.io/zfs-snap-diff/images/delete-snapshot.png><img src=https://j-keck.github.io/zfs-snap-diff/images/delete-snapshot.png></a></figure><h2 id=download-zip-archive>Download zip-archive</h2><p>With the <i class="fas fa-file-archive"></i>symbol in the file browser you can download
a whole directory as a zip-archive. You can download a archive from the
actual filesystem or from a snapshot.</p><figure><a href=https://j-keck.github.io/zfs-snap-diff/images/create-zip-archive.png><img src=https://j-keck.github.io/zfs-snap-diff/images/create-zip-archive.png></a></figure><p>The archive size is restricted by default. You can configure per
<a href=https://j-keck.github.io/zfs-snap-diff/docs/configuration/#max-archive-unpacked-size-mb><code>max-archive-unpacked-size-mb</code></a>.</p></article><footer class=book-footer><div class="flex justify-between"></div><div class=book-comments></div></footer></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#usage>Usage</a></li><li><a href=#startup>Startup</a></li><li><a href=#browse-the-actual-filesytem>Browse the actual filesytem</a></li><li><a href=#browse-snapshots>Browse snapshots</a></li><li><a href=#create-snapshots>Create snapshots</a></li><li><a href=#destroy-snapshot>Destroy snapshot</a></li><li><a href=#download-zip-archive>Download zip-archive</a></li></ul></nav></aside></main><a href=https://github.com/j-keck/zfs-snap-diff class=github-corner aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media(max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></body></html>