<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="zsd"><meta property="og:title" content="zsd"><meta property="og:description" content="zsd is now a independent project. You find it here: https://j-keck.github.io/zsd.
The next version of zfs-snap-diff comes without zsd.
 zsd - cli tool to find older versions of a given file in your zfs snapshots.
With zsd you can
  find older file versions in your zfs snapshots for a given file
  view the file content from a given snapshot
  inspect a diff from the older version to the actual version"><meta property="og:type" content="article"><meta property="og:url" content="https://j-keck.github.io/zfs-snap-diff/docs/zsd/"><meta property="article:section" content="docs"><title>zsd | ZFS Snap Diff</title><link rel=icon href=https://j-keck.github.io/zfs-snap-diff/favicon.png type=image/x-icon><link rel=stylesheet href=https://j-keck.github.io/zfs-snap-diff/book.min.069216e2e061c3cd0dd8f48072aa1fb425cb2d5414fdab5edac31dac6f2c55a4.css integrity="sha256-BpIW4uBhw80N2PSAcqoftCXLLVQU/ate2sMdrG8sVaQ="><script defer src=https://j-keck.github.io/zfs-snap-diff/fontawesome-all.min.js></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://j-keck.github.io/zfs-snap-diff/><span>ZFS Snap Diff</span></a></h2><ul><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/install/>Installation</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/zfs-snap-diff/>zfs-snap-diff</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/zsd/ class=active>zsd</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/configuration/>Configuration</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/changelog/>Changelog</a></li><li><a href=https://j-keck.github.io/zfs-snap-diff/docs/contact-support/>Contact / Support</a></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://j-keck.github.io/zfs-snap-diff/svg/menu.svg class=book-icon alt=Menu></label>
<strong>zsd</strong>
<label for=toc-control><img src=https://j-keck.github.io/zfs-snap-diff/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#usage>Usage</a></li><li><a href=#list-snapshots>List snapshots</a></li><li><a href=#show-file-content>Show file content</a></li><li><a href=#show-diff>Show diff</a></li><li><a href=#restore-file>Restore file</a></li></ul></nav></aside></header><article class=markdown><blockquote class="book-hint warning"><p><code>zsd</code> is now a independent project. You find it here: <a href=https://j-keck.github.io/zsd>https://j-keck.github.io/zsd</a>.</p><p>The next version of <code>zfs-snap-diff</code> comes without <code>zsd</code>.</p></blockquote><p><code>zsd</code> - cli tool to find older versions of a given file in your zfs snapshots.</p><p>With <code>zsd</code> you can</p><ul><li><p>find older file versions in your zfs snapshots for a given file</p></li><li><p>view the file content from a given snapshot</p></li><li><p>inspect a diff from the older version to the actual version</p></li><li><p>restore a version from a zfs snapshot</p></li></ul><p>It uses the same code as <code>zfs-snap-diff</code> to find different file versions in your
zfs snapshots.</p><h2 id=usage>Usage</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>main⟩ zsd -h
zsd - cli tool to find older versions of a given file in your zfs snapshots.

USAGE:
 ./zsd [OPTIONS] &lt;FILE&gt; &lt;ACTION&gt;

OPTIONS:
  -H	Scripting mode. Do not print headers, print absolute dates and separate fields by a single tab
  -V	print version and exit
  -d int
        days to scan (default 2)
 -mount-snapshots
        mount snapshot (only necessary if it&#39;s not mounted by zfs automatically)
 -snapshot-timemachine
        Special output for Snapshot-timemachine (https://github.com/mrBliss/snapshot-timemachine)
 -use-sudo
        use sudo when executing &#39;zfs&#39; commands
  -v	debug output
  -vv
        trace output with caller location

ACTIONS:
  list                : list zfs snapshots where the given file was modified
  cat     &lt;#|SNAPSHOT&gt;: show file content of the given snapshot
  diff    &lt;#|SNAPSHOT&gt;: show a diff from the selected snapshot to the actual version
  restore &lt;#|SNAPSHOT&gt;: restore the file from the given snapshot

You can use the snapshot number from the `list` output or the snapshot name to select a snapshot.

Project home page: https://j-keck.github.io/zfs-snap-diff
</code></pre></div><h2 id=list-snapshots>List snapshots</h2><p>Use the <code>list</code> action to list all snapshots where the
given file was modified.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>main⟩ zsd go.mod list
scan the last 7 days for other file versions
  # | Snapshot                               | Snapshot age
-----------------------------------------------------------
  0 | zfs-auto-snap_hourly-2020-02-12-12h00U | 5 hours
  1 | zfs-auto-snap_hourly-2020-02-12-09h00U | 8 hours
</code></pre></div><h2 id=show-file-content>Show file content</h2><p>Use the <code>cat</code> action to show the file content from
the given snapshot.</p><blockquote class="book-hint info">You can use the snapshot number from the <code>list</code> output
or the snapshot name to select a snapshot.</blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>main⟩ zsd go.mod cat 0
module github.com/j-keck/zfs-snap-diff

require (
  github.com/j-keck/go-diff v1.0.0
  github.com/j-keck/plog v0.5.0
  github.com/stretchr/testify v1.4.0 // indirect
)

go 1.12
</code></pre></div><h2 id=show-diff>Show diff</h2><p>To show a diff from the selected snapshot to the actual version
use the <code>diff</code> action.</p><blockquote class="book-hint info">You can use the snapshot number from the <code>list</code> output
or the snapshot name to select a snapshot.</blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>main⟩ zsd go.mod diff 0
Diff from the actual version to the version from: 2020-02-12 10:07:44.434355182 +0100 CET
module github.com/j-keck/zfs-snap-diff

require (
   github.com/BurntSushi/toml v0.3.1
   github.com/j-keck/go-diff v1.0.0
-  github.com/j-keck/plog v0.5.0
+  github.com/j-keck/plog v0.6.0
   github.com/stretchr/testify v1.4.0 // indirect
)

go 1.12
</code></pre></div><h2 id=restore-file>Restore file</h2><p>To restore a given file with an older version use <code>restore</code>.</p><blockquote class="book-hint info">You can use the snapshot number from the <code>list</code> output
or the snapshot name to select a snapshot.</blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>main⟩ zsd go.mod restore 0
backup from the actual version created at: /home/j/.cache/zfs-snap-diff/backups/home/j/prj/priv/zfs-snap-diff/go.mod_20200212_182709%
version restored from snapshot: zfs-auto-snap_hourly-2020-02-12-12h00U
</code></pre></div><blockquote class="book-hint warning">A backup of the current version will be created.</blockquote></article><footer class=book-footer><div class="flex justify-between"></div><div class=book-comments></div></footer></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#usage>Usage</a></li><li><a href=#list-snapshots>List snapshots</a></li><li><a href=#show-file-content>Show file content</a></li><li><a href=#show-diff>Show diff</a></li><li><a href=#restore-file>Restore file</a></li></ul></nav></aside></main><a href=https://github.com/j-keck/zfs-snap-diff class=github-corner aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media(max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></body></html>